(this["webpackJsonptensorflowjs-react"]=this["webpackJsonptensorflowjs-react"]||[]).push([[0],{210:function(e,t,n){e.exports=n(396)},290:function(e,t){},292:function(e,t){},324:function(e,t){},325:function(e,t){},395:function(e,t,n){},396:function(e,t,n){"use strict";n.r(t);var a,l=n(1),i=n.n(l),o=n(4),r=n.n(o),c=(n(128),n(85)),s=(n(129),n(9)),d=(n(397),n(125)),u=n(88),m=n(53),f=n(54),g=n(56),p=n(55),b=n(57),h=(n(219),n(72)),v=n(186),E=n(121),j=n(187),y=n.n(j),L=(n(398),n(207)),x=(n(223),n(127));!function(e){e.add="add",e.train="train"}(a||(a={}));var w=x.a.Group,O=x.a.Button,C=function(e){function t(){var e,n;Object(m.a)(this,t);for(var l=arguments.length,o=new Array(l),r=0;r<l;r++)o[r]=arguments[r];return(n=Object(g.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).video=null,n.model="MobileNet",n.trainingClassNum=3,n.mobilenet=null,n.classifier=null,n.videoLabel=null,n.state={loading:!1,trainingExamples:[],trainExamplCounter:0,actionBtn:a.add},n.handleLoadingMode=function(e){return n.setState({loading:e})},n.handleActionBtn=function(e){return n.setState({actionBtn:e.target.value})},n.onAddClick=function(){return n.setState({trainExamplCounter:n.state.trainExamplCounter+1})},n.onTrainClick=function(){n.handleLoadingMode(!0),n.props.classifier.train(n.onTrainExamples)},n.onSingleExampleTrain=function(e,t){var a=n.state.trainingExamples;n.props.classifier.addImage(e),a[t]?a[t].counter+=1:a.push({key:e,counter:1}),n.setState({trainingExamples:a})},n.onTrainExamples=function(e){null===e?(n.handleLoadingMode(!1),console.log("Trainning is completed !!!"),n.props.classifier.classify(n.onResultsReady)):console.log("Loss value:",e)},n.onResultsReady=function(e,t){if(e)console.log(e);else{var a=String(t[0].label).toUpperCase();n.props.getTLLabel(a),n.props.classifier.classify(n.onResultsReady),n.setState({trainingExamples:[]})}},n.renderTrainingExamples=function(){for(var e=L.a.Search,t=n.state,a=t.trainingExamples,l=t.trainExamplCounter,o=t.loading,r=[],c=function(t){var l=a[t]?a[t].counter:null;r.push(i.a.createElement(e,{key:t,disabled:o,placeholder:"Train expample",enterButton:"+ ".concat(l||0),onSearch:function(e){return n.onSingleExampleTrain(e,t)}}))},s=0;s<l;s++)c(s);return i.a.createElement(i.a.Fragment,null,r)},n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentWillUnmount",value:function(){this.video=null}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.trainingExamples;return i.a.createElement("div",{id:"tl-wrapper"},i.a.createElement("div",{className:"flex m"},t&&i.a.createElement("div",{className:"m"},i.a.createElement(c.a,{size:"large",indicator:i.a.createElement(s.a,{type:"loading"})})),i.a.createElement(w,{value:this.state.actionBtn,onChange:this.handleActionBtn},i.a.createElement(O,{disabled:t,value:a.add,onClick:this.onAddClick},"Add"),i.a.createElement(O,{disabled:t||!n.length,value:a.train,onClick:this.onTrainClick},"Train")),this.renderTrainingExamples()))}}]),t}(l.Component),M=(n(399),n(126)),S=n(123),k=n.n(S),T=n(206),D=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return(n=Object(g.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={selectedModel:null},n.model=null,n.onModelSelect=function(e){n.setState({selectedModel:e}),n.onLoadModel()},n.onLoadModel=function(){return k.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.awrap(T.a("https://github.com/UlyJsi/tensorflowjs-react/blob/master/src/models/mobilenet/model.json"));case 2:n.model=e.sent,console.log(n.model);case 4:case"end":return e.stop()}}))},n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"flex m"},i.a.createElement(M.a,{defaultValue:"Select model",onChange:this.onModelSelect},i.a.createElement(M.a.Option,{key:"mobilenet",value:"mobilenet"},"MobileNet")))}}]),t}(l.Component),A={imageClassification:"imageClassification",objectDetection:"objectDetection",transferLearning:"transferLearning"},N=h.a.Header,B=h.a.Content,R=h.a.Footer,I=new v,z=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={loading:!1,selectedModel:null},n.width=1e3,n.height=700,n.mobilenet=null,n.classifier=null,n.objects=[],n.video=null,n.trainingClassNum=3,n.tlLabel=null,n.model=null,n.setup=function(){var e=n.state.selectedModel;if(e===A.imageClassification)return n.video=null,void I.remove();null===n.video&&(I.createCanvas(n.width,n.height).parent("main-wrapper").id("main-canvas"),n.video=I.createCapture(I.VIDEO).parent("main-wrapper")),e===A.objectDetection&&(n.model=E.YOLO(n.video,n.onObjectDetect),n.setState({loading:!0})),e===A.transferLearning&&(n.model="MobileNet",n.mobilenet=E.featureExtractor(n.model,{numLabels:n.trainingClassNum},n.onTLModelReady),n.classifier=n.mobilenet.classification(n.video))},n.draw=function(){var e=n.state.selectedModel;e!==A.imageClassification&&(e===A.objectDetection&&n.drawODLabel(),e===A.transferLearning&&n.drawTLLabel())},n.drawODLabel=function(){I.image(n.video,0,0,n.width,n.height);for(var e=0;e<n.objects.length;e++){var t=String(n.objects[e].label).toUpperCase(),a=n.objects[e].x*n.width,l=n.objects[e].y*n.height-5,i=n.objects[e].x*n.width,o=n.objects[e].y*n.height,r=n.objects[e].w*n.width,c=n.objects[e].h*n.height;I.fill(11,104,255),I.noStroke(),I.text(t,a,l),I.noFill(),I.strokeWeight(4),I.textSize(42),I.stroke(11,104,255),I.rect(i,o,r,c)}},n.drawTLLabel=function(){I.image(n.video,0,0,n.width,n.height),I.fill(11,104,255),I.textSize(42),n.tlLabel&&I.text(n.tlLabel,100,100)},n.getTLLabel=function(e){n.tlLabel=e},n.getModels=function(){var e;return e={},Object(u.a)(e,A.imageClassification,{label:"Image classification",component:i.a.createElement(D,null)}),Object(u.a)(e,A.objectDetection,{label:"Object detection",component:i.a.createElement(i.a.Fragment,null)}),Object(u.a)(e,A.transferLearning,{label:"Transfer learning",component:i.a.createElement(C,{p5Lib:I,classifier:n.classifier,getTLLabel:n.getTLLabel})}),e},n.onObjectDetect=function(){n.setState({loading:!1}),console.log("Object detection model is ready !!!"),n.model&&"string"!==typeof n.model&&n.model.detect((function(e,t){n.objects=t,n.onObjectDetect()}))},n.onModelSelect=function(e){var t=e.key;n.setState({selectedModel:t},(function(){return n.setup()}))},n.onTLModelReady=function(){console.log("Transfer learning model is ready !!!"),n.setState({loading:!1})},n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.state,t=e.selectedModel,n=e.loading,a=this.getModels();return i.a.createElement(h.a,null,i.a.createElement(N,null,i.a.createElement(d.a,{theme:"dark",mode:"horizontal",onClick:this.onModelSelect,style:{lineHeight:"64px",textAlign:"center"}},Object.keys(a).map((function(e){return i.a.createElement(d.a.Item,{key:e},a[e].label)})))),i.a.createElement(B,{style:{display:"flex",alignItems:"center",flexDirection:"column"},id:"main-wrapper"},n&&i.a.createElement("div",{className:"m"},i.a.createElement(c.a,{size:"large",indicator:i.a.createElement(s.a,{type:"loading"})})),t&&i.a.createElement(i.a.Fragment,null,a[t].component,i.a.createElement(y.a,{setup:this.setup,draw:this.draw}))),i.a.createElement(R,{style:{textAlign:"center"}},"Made with fun \u263a"))}}]),t}(l.Component);n(395);r.a.render(i.a.createElement(z,null),document.getElementById("root"))}},[[210,1,2]]]);
//# sourceMappingURL=main.346df982.chunk.js.map